{"ast":null,"code":"// Servicio para interactuar con Supabase\nimport{supabase}from'../supabase/config';// ==================== SERVICIO DE AUTENTICACI√ìN ====================\nexport const authService={// Registrar usuario\nasync signUp(email,password,displayName){const{data,error}=await supabase.auth.signUp({email,password,options:{data:{display_name:displayName}}});if(error)throw error;return data;},// Iniciar sesi√≥n\nasync signIn(email,password){const{data,error}=await supabase.auth.signInWithPassword({email,password});if(error)throw error;return data;},// Cerrar sesi√≥n\nasync signOut(){const{error}=await supabase.auth.signOut();if(error)throw error;},// Obtener sesi√≥n actual\nasync getSession(){const{data:{session}}=await supabase.auth.getSession();return session;},// Obtener perfil de usuario - simplificado\nasync getUserProfile(userId){console.log('üîç Buscando perfil para userId:',userId);try{const{data,error}=await supabase.from('profiles').select('*').eq('id',userId).single();if(error){var _user$user_metadata;console.warn('‚ö†Ô∏è Error obteniendo perfil de DB:',error);// Fallback: obtener usuario actual\nconst{data:{user}}=await supabase.auth.getUser();if((user===null||user===void 0?void 0:user.email)==='oterov101@gmail.com'){console.log('üîë Retornando perfil owner para oterov101@gmail.com');return{id:userId,email:'oterov101@gmail.com',display_name:'Administrador Principal',role:'owner'};}// Para otros usuarios, retornar perfil b√°sico\nreturn{id:userId,email:(user===null||user===void 0?void 0:user.email)||'usuario@example.com',display_name:(user===null||user===void 0?void 0:(_user$user_metadata=user.user_metadata)===null||_user$user_metadata===void 0?void 0:_user$user_metadata.display_name)||'Usuario',role:'cliente'};}console.log('‚úÖ Perfil encontrado:',data);return data;}catch(error){var _user$user_metadata2;console.warn('‚ö†Ô∏è Error en getUserProfile, usando fallback:',error);// Fallback b√°sico\nconst{data:{user}}=await supabase.auth.getUser();return{id:userId,email:(user===null||user===void 0?void 0:user.email)||'usuario@example.com',display_name:(user===null||user===void 0?void 0:(_user$user_metadata2=user.user_metadata)===null||_user$user_metadata2===void 0?void 0:_user$user_metadata2.display_name)||'Usuario',role:(user===null||user===void 0?void 0:user.email)==='oterov101@gmail.com'?'owner':'cliente'};}},// Escuchar cambios de autenticaci√≥n\nonAuthStateChange(callback){return supabase.auth.onAuthStateChange(callback);},// Restablecer contrase√±a\nasync resetPassword(email){const{error}=await supabase.auth.resetPasswordForEmail(email);if(error)throw error;}};// ==================== SERVICIO DE VEH√çCULOS ====================\nexport const vehicleService={// Obtener todos los veh√≠culos con filtros\nasync getVehicles(){let filters=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};let query=supabase.from('vehicles').select('*');// Aplicar filtros\nif(filters.brand){query=query.ilike('brand',`%${filters.brand}%`);}if(filters.model){query=query.ilike('model',`%${filters.model}%`);}if(filters.type){query=query.eq('type',filters.type);}if(filters.condition){query=query.eq('condition',filters.condition);}if(filters.transmission){query=query.eq('transmission',filters.transmission);}if(filters.fuelType){query=query.eq('fuel_type',filters.fuelType);}if(filters.minPrice){query=query.gte('price',filters.minPrice);}if(filters.maxPrice){query=query.lte('price',filters.maxPrice);}if(filters.minYear){query=query.gte('year',filters.minYear);}if(filters.maxYear){query=query.lte('year',filters.maxYear);}// Ordenamiento\nif(filters.sortBy){const direction=filters.sortOrder==='desc'?false:true;query=query.order(filters.sortBy,{ascending:direction});}else{query=query.order('created_at',{ascending:false});}// L√≠mite\nif(filters.limit){query=query.limit(filters.limit);}const{data,error}=await query;if(error){var _error$message,_error$message2,_error$message3;console.error('‚ùå Error en query Supabase:',error);console.error('‚ùå Detalles del error:',error);// Si hay error de permisos o conexi√≥n, lanzar el error\nif((_error$message=error.message)!==null&&_error$message!==void 0&&_error$message.includes('RLS')||(_error$message2=error.message)!==null&&_error$message2!==void 0&&_error$message2.includes('policy')||(_error$message3=error.message)!==null&&_error$message3!==void 0&&_error$message3.includes('permission')){console.log('üîí Error de permisos RLS, necesario revisar configuraci√≥n');}throw error;}console.log('‚úÖ Query exitosa, datos recibidos:',(data===null||data===void 0?void 0:data.length)||0);return data||[];},// Obtener veh√≠culo por ID\nasync getVehicleById(id){// Incrementar contador de vistas\nawait supabase.rpc('increment_vehicle_views',{vehicle_id:id});const{data,error}=await supabase.from('vehicles').select('*').eq('id',id).single();if(error)throw error;return data;},// Crear nuevo veh√≠culo\nasync createVehicle(vehicleData){console.log('üîç Datos recibidos en createVehicle:',vehicleData);const{data,error}=await supabase.from('vehicles').insert([{brand:vehicleData.brand,model:vehicleData.model,year:vehicleData.year,kilometers:vehicleData.kilometers,price:vehicleData.price,price_ars:vehicleData.price_ars,// Corregido\ncondition:vehicleData.condition,transmission:vehicleData.transmission,fuel_type:vehicleData.fuel_type,// Corregido\ncolor:vehicleData.color,type:vehicleData.type,location:vehicleData.location,engine:vehicleData.engine,power:vehicleData.power,features:vehicleData.features||[],images:vehicleData.images||[],is_featured:vehicleData.is_featured||false,// Corregido\nis_promotion:vehicleData.is_promotion||false// Corregido\n}]).select().single();if(error){console.error('‚ùå Error en createVehicle:',error);throw error;}console.log('‚úÖ Veh√≠culo creado exitosamente:',data);return data;},// Actualizar veh√≠culo\nasync updateVehicle(id,vehicleData){const{data,error}=await supabase.from('vehicles').update({brand:vehicleData.brand,model:vehicleData.model,year:vehicleData.year,kilometers:vehicleData.kilometers,price:vehicleData.price,price_ars:vehicleData.priceARS,condition:vehicleData.condition,transmission:vehicleData.transmission,fuel_type:vehicleData.fuelType,color:vehicleData.color,type:vehicleData.type,location:vehicleData.location,engine:vehicleData.engine,power:vehicleData.power,features:vehicleData.features,images:vehicleData.images,is_featured:vehicleData.isFeatured,is_promotion:vehicleData.isPromotion}).eq('id',id).select().single();if(error)throw error;return data;},// Eliminar veh√≠culo\nasync deleteVehicle(id){// Primero obtener el veh√≠culo para ver sus im√°genes\nconst{data:vehicle,error:fetchError}=await supabase.from('vehicles').select('images').eq('id',id).single();if(fetchError){console.error('Error obteniendo veh√≠culo:',fetchError);}// Eliminar el veh√≠culo de la base de datos\nconst{error:deleteError}=await supabase.from('vehicles').delete().eq('id',id);if(deleteError)throw deleteError;// Eliminar las im√°genes del storage si existen\nif(vehicle&&vehicle.images&&vehicle.images.length>0){console.log('üóëÔ∏è Eliminando im√°genes del veh√≠culo:',vehicle.images.length);for(const imageUrl of vehicle.images){try{// Extraer el path de la imagen de la URL\nconst urlParts=imageUrl.split('/');const fileName=urlParts[urlParts.length-1];const filePath=`vehicles/${fileName}`;console.log('üóëÔ∏è Eliminando imagen:',filePath);const{error:storageError}=await supabase.storage.from('vehicle-images').remove([filePath]);if(storageError){console.error('‚ùå Error eliminando imagen:',storageError);}else{console.log('‚úÖ Imagen eliminada exitosamente:',filePath);}}catch(imageError){console.error('‚ùå Error procesando imagen:',imageError);}}}console.log('‚úÖ Veh√≠culo e im√°genes eliminados exitosamente');},// Obtener veh√≠culos destacados\nasync getFeaturedVehicles(){let limit=arguments.length>0&&arguments[0]!==undefined?arguments[0]:6;const{data,error}=await supabase.from('vehicles').select('*').eq('is_featured',true).order('created_at',{ascending:false}).limit(limit);if(error)throw error;return data;},// Obtener veh√≠culos en promoci√≥n\nasync getPromotionVehicles(){let limit=arguments.length>0&&arguments[0]!==undefined?arguments[0]:6;const{data,error}=await supabase.from('vehicles').select('*').eq('is_promotion',true).order('created_at',{ascending:false}).limit(limit);if(error)throw error;return data;},// Obtener veh√≠culos similares\nasync getSimilarVehicles(currentVehicle){let limit=arguments.length>1&&arguments[1]!==undefined?arguments[1]:4;const{data,error}=await supabase.from('vehicles').select('*').neq('id',currentVehicle.id).or(`brand.eq.${currentVehicle.brand},type.eq.${currentVehicle.type}`).order('created_at',{ascending:false}).limit(limit);if(error)throw error;return data;},// Subir imagen de veh√≠culo\nasync uploadVehicleImage(file,vehicleId,imageIndex){console.log('üì§ Iniciando subida de imagen:',{fileName:file.name,fileSize:file.size,vehicleId,imageIndex});const fileExt=file.name.split('.').pop();const fileName=`${vehicleId}-${imageIndex}.${fileExt}`;const filePath=`vehicles/${fileName}`;console.log('üìÅ Ruta de archivo:',filePath);const{data,error}=await supabase.storage.from('vehicle-images').upload(filePath,file);if(error){console.error('‚ùå Error subiendo imagen:',error);console.error('‚ùå Detalles del error:',{message:error.message,statusCode:error.statusCode,error:error.error});throw error;}console.log('‚úÖ Imagen subida exitosamente:',data);// Obtener URL p√∫blica\nconst{data:{publicUrl}}=supabase.storage.from('vehicle-images').getPublicUrl(filePath);console.log('üîó URL p√∫blica generada:',publicUrl);return publicUrl;}};// ==================== SERVICIO DE ESTAD√çSTICAS ====================\nexport const statisticsService={async getStatistics(){// Obtener total de veh√≠culos\nconst{count:totalVehicles}=await supabase.from('vehicles').select('*',{count:'exact',head:true});// Obtener veh√≠culos destacados\nconst{count:featuredVehicles}=await supabase.from('vehicles').select('*',{count:'exact',head:true}).eq('is_featured',true);// Obtener veh√≠culos en promoci√≥n\nconst{count:promotionVehicles}=await supabase.from('vehicles').select('*',{count:'exact',head:true}).eq('is_promotion',true);// Obtener total de vistas\nconst{data:viewsData}=await supabase.from('vehicles').select('views');const totalViews=(viewsData===null||viewsData===void 0?void 0:viewsData.reduce((sum,vehicle)=>sum+(vehicle.views||0),0))||0;return{totalVehicles:totalVehicles||0,totalViews,featuredVehicles:featuredVehicles||0,promotionVehicles:promotionVehicles||0};},// Obtener estad√≠sticas de distribuci√≥n por condici√≥n\nasync getVehicleConditionStats(){try{const{data,error}=await supabase.rpc('get_vehicle_condition_stats');if(error)throw error;return data[0]||{new_vehicles:0,used_vehicles:0,total_vehicles:0};}catch(error){console.error('Error obteniendo estad√≠sticas de condici√≥n:',error);return{new_vehicles:0,used_vehicles:0,total_vehicles:0};}},// Obtener estad√≠sticas de vistas de blog\nasync getBlogViewsStats(){try{const{data,error}=await supabase.rpc('get_blog_views_stats');if(error)throw error;return data[0]||{total_views:0,total_articles:0,avg_views_per_article:0};}catch(error){console.error('Error obteniendo estad√≠sticas de blog:',error);return{total_views:0,total_articles:0,avg_views_per_article:0};}},// Obtener estad√≠sticas generales mejoradas\nasync getEnhancedVehicleStats(){try{const{data,error}=await supabase.rpc('get_enhanced_vehicle_stats');if(error)throw error;return data[0]||{total_vehicles:0,total_views:0,featured_vehicles:0,promotion_vehicles:0,new_vehicles:0,used_vehicles:0};}catch(error){console.error('Error obteniendo estad√≠sticas mejoradas:',error);return{total_vehicles:0,total_views:0,featured_vehicles:0,promotion_vehicles:0,new_vehicles:0,used_vehicles:0};}},// Obtener estad√≠sticas de vistas de galer√≠a\nasync getGalleryViewsStats(){try{const{data,error}=await supabase.rpc('get_gallery_views_stats');if(error)throw error;return data[0]||{total_views:0,total_items:0,avg_views_per_item:0,total_unique_visitors:0};}catch(error){console.error('Error obteniendo estad√≠sticas de galer√≠a:',error);return{total_views:0,total_items:0,avg_views_per_item:0,total_unique_visitors:0};}}};","map":{"version":3,"names":["supabase","authService","signUp","email","password","displayName","data","error","auth","options","display_name","signIn","signInWithPassword","signOut","getSession","session","getUserProfile","userId","console","log","from","select","eq","single","_user$user_metadata","warn","user","getUser","id","role","user_metadata","_user$user_metadata2","onAuthStateChange","callback","resetPassword","resetPasswordForEmail","vehicleService","getVehicles","filters","arguments","length","undefined","query","brand","ilike","model","type","condition","transmission","fuelType","minPrice","gte","maxPrice","lte","minYear","maxYear","sortBy","direction","sortOrder","order","ascending","limit","_error$message","_error$message2","_error$message3","message","includes","getVehicleById","rpc","vehicle_id","createVehicle","vehicleData","insert","year","kilometers","price","price_ars","fuel_type","color","location","engine","power","features","images","is_featured","is_promotion","updateVehicle","update","priceARS","isFeatured","isPromotion","deleteVehicle","vehicle","fetchError","deleteError","delete","imageUrl","urlParts","split","fileName","filePath","storageError","storage","remove","imageError","getFeaturedVehicles","getPromotionVehicles","getSimilarVehicles","currentVehicle","neq","or","uploadVehicleImage","file","vehicleId","imageIndex","name","fileSize","size","fileExt","pop","upload","statusCode","publicUrl","getPublicUrl","statisticsService","getStatistics","count","totalVehicles","head","featuredVehicles","promotionVehicles","viewsData","totalViews","reduce","sum","views","getVehicleConditionStats","new_vehicles","used_vehicles","total_vehicles","getBlogViewsStats","total_views","total_articles","avg_views_per_article","getEnhancedVehicleStats","featured_vehicles","promotion_vehicles","getGalleryViewsStats","total_items","avg_views_per_item","total_unique_visitors"],"sources":["C:/Users/otero/OneDrive/Escritorio/Paginas Web/ri cars automotores/src/services/supabaseService.js"],"sourcesContent":["// Servicio para interactuar con Supabase\r\nimport { supabase } from '../supabase/config';\r\n\r\n// ==================== SERVICIO DE AUTENTICACI√ìN ====================\r\nexport const authService = {\r\n  // Registrar usuario\r\n  async signUp(email, password, displayName) {\r\n    const { data, error } = await supabase.auth.signUp({\r\n      email,\r\n      password,\r\n      options: {\r\n        data: {\r\n          display_name: displayName\r\n        }\r\n      }\r\n    });\r\n\r\n    if (error) throw error;\r\n    return data;\r\n  },\r\n\r\n  // Iniciar sesi√≥n\r\n  async signIn(email, password) {\r\n    const { data, error } = await supabase.auth.signInWithPassword({\r\n      email,\r\n      password\r\n    });\r\n\r\n    if (error) throw error;\r\n    return data;\r\n  },\r\n\r\n  // Cerrar sesi√≥n\r\n  async signOut() {\r\n    const { error } = await supabase.auth.signOut();\r\n    if (error) throw error;\r\n  },\r\n\r\n  // Obtener sesi√≥n actual\r\n  async getSession() {\r\n    const { data: { session } } = await supabase.auth.getSession();\r\n    return session;\r\n  },\r\n\r\n  // Obtener perfil de usuario - simplificado\r\n  async getUserProfile(userId) {\r\n    console.log('üîç Buscando perfil para userId:', userId);\r\n    \r\n    try {\r\n      const { data, error } = await supabase\r\n        .from('profiles')\r\n        .select('*')\r\n        .eq('id', userId)\r\n        .single();\r\n\r\n      if (error) {\r\n        console.warn('‚ö†Ô∏è Error obteniendo perfil de DB:', error);\r\n        \r\n        // Fallback: obtener usuario actual\r\n        const { data: { user } } = await supabase.auth.getUser();\r\n        if (user?.email === 'oterov101@gmail.com') {\r\n          console.log('üîë Retornando perfil owner para oterov101@gmail.com');\r\n          return {\r\n            id: userId,\r\n            email: 'oterov101@gmail.com',\r\n            display_name: 'Administrador Principal',\r\n            role: 'owner'\r\n          };\r\n        }\r\n        \r\n        // Para otros usuarios, retornar perfil b√°sico\r\n        return {\r\n          id: userId,\r\n          email: user?.email || 'usuario@example.com',\r\n          display_name: user?.user_metadata?.display_name || 'Usuario',\r\n          role: 'cliente'\r\n        };\r\n      }\r\n\r\n      console.log('‚úÖ Perfil encontrado:', data);\r\n      return data;\r\n    } catch (error) {\r\n      console.warn('‚ö†Ô∏è Error en getUserProfile, usando fallback:', error);\r\n      \r\n      // Fallback b√°sico\r\n      const { data: { user } } = await supabase.auth.getUser();\r\n      return {\r\n        id: userId,\r\n        email: user?.email || 'usuario@example.com',\r\n        display_name: user?.user_metadata?.display_name || 'Usuario',\r\n        role: user?.email === 'oterov101@gmail.com' ? 'owner' : 'cliente'\r\n      };\r\n    }\r\n  },\r\n\r\n  // Escuchar cambios de autenticaci√≥n\r\n  onAuthStateChange(callback) {\r\n    return supabase.auth.onAuthStateChange(callback);\r\n  },\r\n\r\n  // Restablecer contrase√±a\r\n  async resetPassword(email) {\r\n    const { error } = await supabase.auth.resetPasswordForEmail(email);\r\n    if (error) throw error;\r\n  }\r\n};\r\n\r\n// ==================== SERVICIO DE VEH√çCULOS ====================\r\nexport const vehicleService = {\r\n  // Obtener todos los veh√≠culos con filtros\r\n  async getVehicles(filters = {}) {\r\n    \r\n    let query = supabase.from('vehicles').select('*');\r\n\r\n    // Aplicar filtros\r\n    if (filters.brand) {\r\n      query = query.ilike('brand', `%${filters.brand}%`);\r\n    }\r\n    if (filters.model) {\r\n      query = query.ilike('model', `%${filters.model}%`);\r\n    }\r\n    if (filters.type) {\r\n      query = query.eq('type', filters.type);\r\n    }\r\n    if (filters.condition) {\r\n      query = query.eq('condition', filters.condition);\r\n    }\r\n    if (filters.transmission) {\r\n      query = query.eq('transmission', filters.transmission);\r\n    }\r\n    if (filters.fuelType) {\r\n      query = query.eq('fuel_type', filters.fuelType);\r\n    }\r\n    if (filters.minPrice) {\r\n      query = query.gte('price', filters.minPrice);\r\n    }\r\n    if (filters.maxPrice) {\r\n      query = query.lte('price', filters.maxPrice);\r\n    }\r\n    if (filters.minYear) {\r\n      query = query.gte('year', filters.minYear);\r\n    }\r\n    if (filters.maxYear) {\r\n      query = query.lte('year', filters.maxYear);\r\n    }\r\n\r\n    // Ordenamiento\r\n    if (filters.sortBy) {\r\n      const direction = filters.sortOrder === 'desc' ? false : true;\r\n      query = query.order(filters.sortBy, { ascending: direction });\r\n    } else {\r\n      query = query.order('created_at', { ascending: false });\r\n    }\r\n\r\n    // L√≠mite\r\n    if (filters.limit) {\r\n      query = query.limit(filters.limit);\r\n    }\r\n\r\n    const { data, error } = await query;\r\n    \r\n    if (error) {\r\n      console.error('‚ùå Error en query Supabase:', error);\r\n      console.error('‚ùå Detalles del error:', error);\r\n      \r\n      // Si hay error de permisos o conexi√≥n, lanzar el error\r\n      if (error.message?.includes('RLS') || error.message?.includes('policy') || error.message?.includes('permission')) {\r\n        console.log('üîí Error de permisos RLS, necesario revisar configuraci√≥n');\r\n      }\r\n      \r\n      throw error;\r\n    }\r\n    \r\n    console.log('‚úÖ Query exitosa, datos recibidos:', data?.length || 0);\r\n    return data || [];\r\n  },\r\n\r\n  // Obtener veh√≠culo por ID\r\n  async getVehicleById(id) {\r\n    // Incrementar contador de vistas\r\n    await supabase.rpc('increment_vehicle_views', { vehicle_id: id });\r\n\r\n    const { data, error } = await supabase\r\n      .from('vehicles')\r\n      .select('*')\r\n      .eq('id', id)\r\n      .single();\r\n\r\n    if (error) throw error;\r\n    return data;\r\n  },\r\n\r\n  // Crear nuevo veh√≠culo\r\n  async createVehicle(vehicleData) {\r\n    console.log('üîç Datos recibidos en createVehicle:', vehicleData);\r\n    \r\n    const { data, error } = await supabase\r\n      .from('vehicles')\r\n      .insert([{\r\n        brand: vehicleData.brand,\r\n        model: vehicleData.model,\r\n        year: vehicleData.year,\r\n        kilometers: vehicleData.kilometers,\r\n        price: vehicleData.price,\r\n        price_ars: vehicleData.price_ars, // Corregido\r\n        condition: vehicleData.condition,\r\n        transmission: vehicleData.transmission,\r\n        fuel_type: vehicleData.fuel_type, // Corregido\r\n        color: vehicleData.color,\r\n        type: vehicleData.type,\r\n        location: vehicleData.location,\r\n        engine: vehicleData.engine,\r\n        power: vehicleData.power,\r\n        features: vehicleData.features || [],\r\n        images: vehicleData.images || [],\r\n        is_featured: vehicleData.is_featured || false, // Corregido\r\n        is_promotion: vehicleData.is_promotion || false // Corregido\r\n      }])\r\n      .select()\r\n      .single();\r\n\r\n    if (error) {\r\n      console.error('‚ùå Error en createVehicle:', error);\r\n      throw error;\r\n    }\r\n    console.log('‚úÖ Veh√≠culo creado exitosamente:', data);\r\n    return data;\r\n  },\r\n\r\n  // Actualizar veh√≠culo\r\n  async updateVehicle(id, vehicleData) {\r\n    const { data, error } = await supabase\r\n      .from('vehicles')\r\n      .update({\r\n        brand: vehicleData.brand,\r\n        model: vehicleData.model,\r\n        year: vehicleData.year,\r\n        kilometers: vehicleData.kilometers,\r\n        price: vehicleData.price,\r\n        price_ars: vehicleData.priceARS,\r\n        condition: vehicleData.condition,\r\n        transmission: vehicleData.transmission,\r\n        fuel_type: vehicleData.fuelType,\r\n        color: vehicleData.color,\r\n        type: vehicleData.type,\r\n        location: vehicleData.location,\r\n        engine: vehicleData.engine,\r\n        power: vehicleData.power,\r\n        features: vehicleData.features,\r\n        images: vehicleData.images,\r\n        is_featured: vehicleData.isFeatured,\r\n        is_promotion: vehicleData.isPromotion\r\n      })\r\n      .eq('id', id)\r\n      .select()\r\n      .single();\r\n\r\n    if (error) throw error;\r\n    return data;\r\n  },\r\n\r\n  // Eliminar veh√≠culo\r\n  async deleteVehicle(id) {\r\n    // Primero obtener el veh√≠culo para ver sus im√°genes\r\n    const { data: vehicle, error: fetchError } = await supabase\r\n      .from('vehicles')\r\n      .select('images')\r\n      .eq('id', id)\r\n      .single();\r\n\r\n    if (fetchError) {\r\n      console.error('Error obteniendo veh√≠culo:', fetchError);\r\n    }\r\n\r\n    // Eliminar el veh√≠culo de la base de datos\r\n    const { error: deleteError } = await supabase\r\n      .from('vehicles')\r\n      .delete()\r\n      .eq('id', id);\r\n\r\n    if (deleteError) throw deleteError;\r\n\r\n    // Eliminar las im√°genes del storage si existen\r\n    if (vehicle && vehicle.images && vehicle.images.length > 0) {\r\n      console.log('üóëÔ∏è Eliminando im√°genes del veh√≠culo:', vehicle.images.length);\r\n      \r\n      for (const imageUrl of vehicle.images) {\r\n        try {\r\n          // Extraer el path de la imagen de la URL\r\n          const urlParts = imageUrl.split('/');\r\n          const fileName = urlParts[urlParts.length - 1];\r\n          const filePath = `vehicles/${fileName}`;\r\n          \r\n          console.log('üóëÔ∏è Eliminando imagen:', filePath);\r\n          \r\n          const { error: storageError } = await supabase.storage\r\n            .from('vehicle-images')\r\n            .remove([filePath]);\r\n          \r\n          if (storageError) {\r\n            console.error('‚ùå Error eliminando imagen:', storageError);\r\n          } else {\r\n            console.log('‚úÖ Imagen eliminada exitosamente:', filePath);\r\n          }\r\n        } catch (imageError) {\r\n          console.error('‚ùå Error procesando imagen:', imageError);\r\n        }\r\n      }\r\n    }\r\n\r\n    console.log('‚úÖ Veh√≠culo e im√°genes eliminados exitosamente');\r\n  },\r\n\r\n  // Obtener veh√≠culos destacados\r\n  async getFeaturedVehicles(limit = 6) {\r\n    const { data, error } = await supabase\r\n      .from('vehicles')\r\n      .select('*')\r\n      .eq('is_featured', true)\r\n      .order('created_at', { ascending: false })\r\n      .limit(limit);\r\n\r\n    if (error) throw error;\r\n    return data;\r\n  },\r\n\r\n  // Obtener veh√≠culos en promoci√≥n\r\n  async getPromotionVehicles(limit = 6) {\r\n    const { data, error } = await supabase\r\n      .from('vehicles')\r\n      .select('*')\r\n      .eq('is_promotion', true)\r\n      .order('created_at', { ascending: false })\r\n      .limit(limit);\r\n\r\n    if (error) throw error;\r\n    return data;\r\n  },\r\n\r\n  // Obtener veh√≠culos similares\r\n  async getSimilarVehicles(currentVehicle, limit = 4) {\r\n    const { data, error } = await supabase\r\n      .from('vehicles')\r\n      .select('*')\r\n      .neq('id', currentVehicle.id)\r\n      .or(`brand.eq.${currentVehicle.brand},type.eq.${currentVehicle.type}`)\r\n      .order('created_at', { ascending: false })\r\n      .limit(limit);\r\n\r\n    if (error) throw error;\r\n    return data;\r\n  },\r\n\r\n  // Subir imagen de veh√≠culo\r\n  async uploadVehicleImage(file, vehicleId, imageIndex) {\r\n    console.log('üì§ Iniciando subida de imagen:', {\r\n      fileName: file.name,\r\n      fileSize: file.size,\r\n      vehicleId,\r\n      imageIndex\r\n    });\r\n\r\n    const fileExt = file.name.split('.').pop();\r\n    const fileName = `${vehicleId}-${imageIndex}.${fileExt}`;\r\n    const filePath = `vehicles/${fileName}`;\r\n\r\n    console.log('üìÅ Ruta de archivo:', filePath);\r\n\r\n    const { data, error } = await supabase.storage\r\n      .from('vehicle-images')\r\n      .upload(filePath, file);\r\n\r\n    if (error) {\r\n      console.error('‚ùå Error subiendo imagen:', error);\r\n      console.error('‚ùå Detalles del error:', {\r\n        message: error.message,\r\n        statusCode: error.statusCode,\r\n        error: error.error\r\n      });\r\n      throw error;\r\n    }\r\n\r\n    console.log('‚úÖ Imagen subida exitosamente:', data);\r\n\r\n    // Obtener URL p√∫blica\r\n    const { data: { publicUrl } } = supabase.storage\r\n      .from('vehicle-images')\r\n      .getPublicUrl(filePath);\r\n\r\n    console.log('üîó URL p√∫blica generada:', publicUrl);\r\n    return publicUrl;\r\n  }\r\n};\r\n\r\n// ==================== SERVICIO DE ESTAD√çSTICAS ====================\r\nexport const statisticsService = {\r\n  async getStatistics() {\r\n    // Obtener total de veh√≠culos\r\n    const { count: totalVehicles } = await supabase\r\n      .from('vehicles')\r\n      .select('*', { count: 'exact', head: true });\r\n\r\n    // Obtener veh√≠culos destacados\r\n    const { count: featuredVehicles } = await supabase\r\n      .from('vehicles')\r\n      .select('*', { count: 'exact', head: true })\r\n      .eq('is_featured', true);\r\n\r\n    // Obtener veh√≠culos en promoci√≥n\r\n    const { count: promotionVehicles } = await supabase\r\n      .from('vehicles')\r\n      .select('*', { count: 'exact', head: true })\r\n      .eq('is_promotion', true);\r\n\r\n    // Obtener total de vistas\r\n    const { data: viewsData } = await supabase\r\n      .from('vehicles')\r\n      .select('views');\r\n\r\n    const totalViews = viewsData?.reduce((sum, vehicle) => sum + (vehicle.views || 0), 0) || 0;\r\n\r\n    return {\r\n      totalVehicles: totalVehicles || 0,\r\n      totalViews,\r\n      featuredVehicles: featuredVehicles || 0,\r\n      promotionVehicles: promotionVehicles || 0\r\n    };\r\n  },\r\n\r\n  // Obtener estad√≠sticas de distribuci√≥n por condici√≥n\r\n  async getVehicleConditionStats() {\r\n    try {\r\n      const { data, error } = await supabase\r\n        .rpc('get_vehicle_condition_stats');\r\n\r\n      if (error) throw error;\r\n      return data[0] || { new_vehicles: 0, used_vehicles: 0, total_vehicles: 0 };\r\n    } catch (error) {\r\n      console.error('Error obteniendo estad√≠sticas de condici√≥n:', error);\r\n      return { new_vehicles: 0, used_vehicles: 0, total_vehicles: 0 };\r\n    }\r\n  },\r\n\r\n  // Obtener estad√≠sticas de vistas de blog\r\n  async getBlogViewsStats() {\r\n    try {\r\n      const { data, error } = await supabase\r\n        .rpc('get_blog_views_stats');\r\n\r\n      if (error) throw error;\r\n      return data[0] || { total_views: 0, total_articles: 0, avg_views_per_article: 0 };\r\n    } catch (error) {\r\n      console.error('Error obteniendo estad√≠sticas de blog:', error);\r\n      return { total_views: 0, total_articles: 0, avg_views_per_article: 0 };\r\n    }\r\n  },\r\n\r\n  // Obtener estad√≠sticas generales mejoradas\r\n  async getEnhancedVehicleStats() {\r\n    try {\r\n      const { data, error } = await supabase\r\n        .rpc('get_enhanced_vehicle_stats');\r\n\r\n      if (error) throw error;\r\n      return data[0] || { \r\n        total_vehicles: 0, \r\n        total_views: 0, \r\n        featured_vehicles: 0, \r\n        promotion_vehicles: 0,\r\n        new_vehicles: 0,\r\n        used_vehicles: 0\r\n      };\r\n    } catch (error) {\r\n      console.error('Error obteniendo estad√≠sticas mejoradas:', error);\r\n      return { \r\n        total_vehicles: 0, \r\n        total_views: 0, \r\n        featured_vehicles: 0, \r\n        promotion_vehicles: 0,\r\n        new_vehicles: 0,\r\n        used_vehicles: 0\r\n      };\r\n    }\r\n  },\r\n\r\n  // Obtener estad√≠sticas de vistas de galer√≠a\r\n  async getGalleryViewsStats() {\r\n    try {\r\n      const { data, error } = await supabase\r\n        .rpc('get_gallery_views_stats');\r\n\r\n      if (error) throw error;\r\n      return data[0] || { \r\n        total_views: 0, \r\n        total_items: 0, \r\n        avg_views_per_item: 0, \r\n        total_unique_visitors: 0 \r\n      };\r\n    } catch (error) {\r\n      console.error('Error obteniendo estad√≠sticas de galer√≠a:', error);\r\n      return { \r\n        total_views: 0, \r\n        total_items: 0, \r\n        avg_views_per_item: 0, \r\n        total_unique_visitors: 0 \r\n      };\r\n    }\r\n  }\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}