{"ast":null,"code":"import React,{useState,useEffect}from'react';import{motion}from'framer-motion';import{Crown,Shield,User,Mail,Search,Plus,Edit,Trash2,Save,X,AlertTriangle,Users,UserCheck,UserX}from'lucide-react';import{useAuth}from'../../contexts/AuthContext';import{supabase}from'../../supabase/config';import toast from'react-hot-toast';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const UserManagement=()=>{const{currentUser}=useAuth();const[users,setUsers]=useState([]);const[loading,setLoading]=useState(true);const[searchTerm,setSearchTerm]=useState('');const[showAddUser,setShowAddUser]=useState(false);const[editingUser,setEditingUser]=useState(null);const[isOwnerVerified,setIsOwnerVerified]=useState(false);const[checkingPermissions,setCheckingPermissions]=useState(true);const[formData,setFormData]=useState({email:'',role:'cliente'});const roles=[{value:'cliente',label:'Cliente',icon:User,color:'bg-gray-100 text-gray-800'},{value:'admin',label:'Administrador',icon:Shield,color:'bg-blue-100 text-blue-800'},{value:'owner',label:'Due√±o',icon:Crown,color:'bg-purple-100 text-purple-800'}];useEffect(()=>{const checkOwnerPermissions=async()=>{if(!currentUser){setCheckingPermissions(false);return;}try{setCheckingPermissions(true);console.log('üîç Verificando permisos de owner para:',currentUser.email);// Forzar owner para tu email espec√≠fico\nif(currentUser.email==='oterov101@gmail.com'){console.log('üëë OWNER FORZADO para oterov101@gmail.com');setIsOwnerVerified(true);return;}// Verificar si es owner (solo tu email)\nconst isOwner=currentUser.email==='oterov101@gmail.com';setIsOwnerVerified(isOwner);console.log('‚úÖ Permisos verificados:',{email:currentUser.email,isOwner:isOwner});}catch(error){console.error('‚ùå Error en verificaci√≥n de permisos:',error);setIsOwnerVerified(false);}finally{setCheckingPermissions(false);}};checkOwnerPermissions();},[currentUser]);useEffect(()=>{if(isOwnerVerified){loadUsers();}},[isOwnerVerified]);const loadUsers=async()=>{try{setLoading(true);console.log('üîç Cargando usuarios desde la base de datos...');// Obtener usuarios reales de la base de datos usando funci√≥n RPC\nlet combinedUsers=[];try{console.log('üîç Obteniendo usuarios reales de la DB...');// Consultar directamente la tabla profiles\nconst{data:profiles,error}=await supabase.from('profiles').select('*').order('created_at',{ascending:false});if(error){console.warn('‚ö†Ô∏è Error obteniendo perfiles de DB:',error);// Usar datos de ejemplo como fallback\nconsole.log('‚ÑπÔ∏è Usando datos de ejemplo como fallback');combinedUsers=[{id:'4d3a21a6-cc21-4d72-8888-80ed99e9d9fe',email:'oterov101@gmail.com',display_name:'Administrador Principal',role:'owner',created_at:'2025-08-07T22:00:57.345228+00:00',updated_at:'2025-08-08T03:05:04.462677+00:00',last_sign_in:new Date().toISOString(),email_confirmed:true},{id:'f4937aae-e054-4fd3-9a5c-bdfea1234567',email:'oterov006@gmail.com',display_name:'Valentin Otero',role:'cliente',created_at:'2025-08-08T00:59:41.291027+00:00',updated_at:'2025-08-08T00:59:41.291027+00:00',last_sign_in:new Date().toISOString(),email_confirmed:true}];}else{console.log('‚úÖ Usuarios obtenidos de DB:',profiles);// Convertir los datos de la tabla al formato esperado\ncombinedUsers=profiles.map(profile=>({id:profile.id,email:profile.email,display_name:profile.display_name||'Usuario',role:profile.role||'cliente',created_at:profile.created_at,updated_at:profile.updated_at,last_sign_in:new Date().toISOString(),email_confirmed:true}));}}catch(dbError){console.warn('‚ö†Ô∏è Error obteniendo usuarios de DB:',dbError);// Usar datos de ejemplo como fallback\ncombinedUsers=[{id:'4d3a21a6-cc21-4d72-8888-80ed99e9d9fe',email:'oterov101@gmail.com',display_name:'Administrador Principal',role:'owner',created_at:'2025-08-07T22:00:57.345228+00:00',updated_at:'2025-08-08T03:05:04.462677+00:00',last_sign_in:new Date().toISOString(),email_confirmed:true},{id:'f4937aae-e054-4fd3-9a5c-bdfea1234567',email:'oterov006@gmail.com',display_name:'Valentin Otero',role:'cliente',created_at:'2025-08-08T00:59:41.291027+00:00',updated_at:'2025-08-08T00:59:41.291027+00:00',last_sign_in:new Date().toISOString(),email_confirmed:true}];}console.log('‚úÖ Usuarios cargados:',combinedUsers.length);console.log('üìã Usuarios:',combinedUsers);setUsers(combinedUsers);}catch(error){console.error('‚ùå Error cargando usuarios:',error);toast.error('Error al cargar los usuarios: '+error.message);// Fallback: mostrar solo el usuario actual\nif(currentUser){var _currentUser$user_met;setUsers([{id:currentUser.id,email:currentUser.email,display_name:((_currentUser$user_met=currentUser.user_metadata)===null||_currentUser$user_met===void 0?void 0:_currentUser$user_met.display_name)||'Usuario Principal',role:currentUser.email==='oterov101@gmail.com'?'owner':'cliente',created_at:new Date().toISOString(),updated_at:new Date().toISOString(),last_sign_in:new Date().toISOString(),email_confirmed:true}]);}}finally{setLoading(false);}};const handleSearch=term=>{setSearchTerm(term);};const filteredUsers=users.filter(user=>user.email.toLowerCase().includes(searchTerm.toLowerCase()));const handleAddUser=async()=>{// Verificar permisos de owner antes de proceder\nif(!isOwnerVerified){toast.error('Solo los due√±os pueden agregar usuarios');return;}if(!formData.email){toast.error('El email es obligatorio');return;}// Validar formato de email\nconst emailRegex=/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;if(!emailRegex.test(formData.email)){toast.error('Por favor ingresa un email v√°lido');return;}// Verificar si el usuario ya existe\nconst existingUser=users.find(u=>u.email.toLowerCase()===formData.email.toLowerCase());if(existingUser){toast.error('Ya existe un usuario con este email');return;}try{console.log('üÜï Agregando usuario:',formData);// Verificar que el usuario actual sigue siendo owner\nconst{data:currentProfile,error:currentProfileError}=await supabase.from('profiles').select('role').eq('id',currentUser.id).maybeSingle();if(currentProfileError||currentProfile.role!=='owner'){toast.error('No tienes permisos para realizar esta acci√≥n');return;}// Crear usuario en auth.users (requiere permisos admin)\nlet userId=null;console.log('‚ÑπÔ∏è Omitiendo creaci√≥n en auth.users (requiere permisos de servidor)');console.log('‚ÑπÔ∏è Solo se crear√° el perfil en la tabla profiles');// Crear usuario en la base de datos directamente\ntry{console.log('üîÑ Creando usuario en DB:',formData.email);// Insertar directamente en la tabla profiles\nconst{data:newProfile,error:insertError}=await supabase.from('profiles').insert([{email:formData.email,display_name:formData.email.split('@')[0],role:formData.role,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}]).select().single();if(insertError){console.warn('‚ö†Ô∏è Error creando en DB (continuando localmente):',insertError);// Continuar con creaci√≥n local\nconst newUser={id:`user_${Date.now()}`,email:formData.email,display_name:formData.email.split('@')[0],role:formData.role,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),last_sign_in:null,email_confirmed:true};setUsers(prev=>[newUser,...prev]);}else{console.log('‚úÖ Usuario creado exitosamente en DB:',newProfile);// Agregar a la lista local con datos de DB\nconst newUser={id:newProfile.id,email:newProfile.email,display_name:newProfile.display_name,role:newProfile.role,created_at:newProfile.created_at,updated_at:newProfile.updated_at,last_sign_in:null,email_confirmed:true};setUsers(prev=>[newUser,...prev]);}}catch(dbError){console.warn('‚ö†Ô∏è No se pudo crear en DB (continuando localmente):',dbError);// Crear usuario localmente como fallback\nconst newUser={id:`user_${Date.now()}`,email:formData.email,display_name:formData.email.split('@')[0],role:formData.role,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),last_sign_in:null,email_confirmed:true};setUsers(prev=>[newUser,...prev]);}console.log('‚úÖ Usuario agregado exitosamente');toast.success(`Usuario ${formData.email} agregado con rol ${getRoleInfo(formData.role).label}`);setFormData({email:'',role:'cliente'});setShowAddUser(false);}catch(error){console.error('‚ùå Error agregando usuario:',error);toast.error('Error al agregar el usuario: '+error.message);}};const handleRoleChange=async(userId,newRole)=>{// Verificar permisos de owner antes de proceder\nif(!isOwnerVerified){toast.error('Solo los due√±os pueden cambiar roles de usuarios');return;}try{console.log(`üîÑ Cambiando rol del usuario ${userId} a ${newRole}`);// Verificar permisos de owner\nif(currentUser.email!=='oterov101@gmail.com'){toast.error('Solo los due√±os pueden cambiar roles de usuarios');return;}// Prevenir cambiar el rol del owner principal\nconst user=users.find(u=>u.id===userId);if((user===null||user===void 0?void 0:user.email)==='oterov101@gmail.com'&&newRole!=='owner'){toast.error('No puedes cambiar tu propio rol de due√±o');return;}// Actualizar rol en la base de datos directamente\ntry{console.log('üîÑ Actualizando rol en DB para usuario:',userId);// Actualizar directamente en la tabla profiles\nconst{data:result,error:updateError}=await supabase.from('profiles').update({role:newRole,updated_at:new Date().toISOString()}).eq('id',userId).select().single();if(updateError){console.warn('‚ö†Ô∏è Error actualizando en DB (continuando localmente):',updateError);// Continuar con actualizaci√≥n local\n}else{console.log('‚úÖ Rol actualizado exitosamente en DB:',result);}}catch(dbError){console.warn('‚ö†Ô∏è No se pudo actualizar en DB (continuando localmente):',dbError);// Continuar con actualizaci√≥n local\n}// Actualizar el estado local\nsetUsers(prev=>prev.map(user=>user.id===userId?{...user,role:newRole,updated_at:new Date().toISOString()}:user));console.log('‚úÖ Rol actualizado exitosamente');toast.success(`Rol actualizado a ${getRoleInfo(newRole).label}`);}catch(error){console.error('‚ùå Error cambiando rol:',error);toast.error('Error al cambiar el rol: '+error.message);}};const handleDeleteUser=async userId=>{// Verificar permisos de owner antes de proceder\nif(!isOwnerVerified){toast.error('Solo los due√±os pueden eliminar usuarios');return;}const user=users.find(u=>u.id===userId);// Verificar permisos de owner\nif(currentUser.email!=='oterov101@gmail.com'){toast.error('Solo los due√±os pueden eliminar usuarios');return;}// Prevenir eliminar al owner principal\nif((user===null||user===void 0?void 0:user.email)==='oterov101@gmail.com'){toast.error('No puedes eliminar al due√±o principal');return;}if(window.confirm(`¬øEst√°s seguro de eliminar al usuario ${user===null||user===void 0?void 0:user.email}?\\n\\nEsta acci√≥n eliminar√°:\\n- El perfil del usuario\\n- Su acceso al sistema\\n\\nEsta acci√≥n no se puede deshacer.`)){try{console.log(`üóëÔ∏è Eliminando usuario ${userId} (${user===null||user===void 0?void 0:user.email})`);// Eliminar usuario de la base de datos directamente\ntry{console.log('üîÑ Eliminando usuario de DB:',userId);// Eliminar directamente de la tabla profiles\nconst{data:result,error:deleteError}=await supabase.from('profiles').delete().eq('id',userId).select().single();if(deleteError){console.warn('‚ö†Ô∏è Error eliminando de DB (continuando localmente):',deleteError);// Continuar con eliminaci√≥n local\n}else{console.log('‚úÖ Usuario eliminado exitosamente de DB:',result);}}catch(dbError){console.warn('‚ö†Ô∏è No se pudo eliminar de DB (continuando localmente):',dbError);// Continuar con eliminaci√≥n local\n}// Omitir eliminaci√≥n de auth.users (requiere permisos de servidor)\nconsole.log('‚ÑπÔ∏è Omitiendo eliminaci√≥n de auth.users (requiere permisos de servidor)');console.log('‚ÑπÔ∏è Solo se eliminar√° el perfil de la tabla profiles');// Actualizar el estado local\nsetUsers(prev=>prev.filter(u=>u.id!==userId));console.log('‚úÖ Usuario eliminado exitosamente');toast.success('Usuario eliminado exitosamente');}catch(error){console.error('‚ùå Error eliminando usuario:',error);toast.error('Error al eliminar el usuario: '+error.message);}}};const getRoleInfo=role=>{return roles.find(r=>r.value===role)||roles[0];};const formatDate=dateString=>{if(!dateString)return'Nunca';return new Date(dateString).toLocaleDateString('es-ES',{year:'numeric',month:'short',day:'numeric',hour:'2-digit',minute:'2-digit'});};if(loading||checkingPermissions){return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center h-64\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"Verificando permisos...\"})]})});}if(!isOwnerVerified){return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center h-64\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4\",children:/*#__PURE__*/_jsx(Crown,{className:\"w-8 h-8 text-red-600\"})}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-gray-900 mb-2\",children:\"Acceso Denegado\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-4\",children:\"Solo los due\\xF1os pueden acceder a la gesti\\xF3n de usuarios.\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:\"Tu rol actual no tiene permisos para esta funci\\xF3n.\"})]})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"text-2xl font-bold text-gray-900 flex items-center\",children:[/*#__PURE__*/_jsx(Crown,{className:\"w-6 h-6 text-purple-600 mr-2\"}),\"Gesti\\xF3n de Usuarios\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mt-1\",children:\"Administra usuarios y sus roles en el sistema\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowAddUser(true),className:\"btn-primary flex items-center\",children:[/*#__PURE__*/_jsx(Plus,{className:\"w-4 h-4 mr-2\"}),\"Agregar Usuario\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-4 gap-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(Users,{className:\"w-8 h-8 text-blue-600\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-500\",children:\"Total Usuarios\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-semibold text-gray-900\",children:users.length})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(Crown,{className:\"w-8 h-8 text-purple-600\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-500\",children:\"Due\\xF1os\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-semibold text-gray-900\",children:users.filter(u=>u.role==='owner').length})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(Shield,{className:\"w-8 h-8 text-blue-600\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-500\",children:\"Administradores\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-semibold text-gray-900\",children:users.filter(u=>u.role==='admin').length})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(User,{className:\"w-8 h-8 text-gray-600\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-500\",children:\"Clientes\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-semibold text-gray-900\",children:users.filter(u=>u.role==='cliente').length})]})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(Search,{className:\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Buscar usuarios por email...\",value:searchTerm,onChange:e=>handleSearch(e.target.value),className:\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow overflow-hidden\",children:/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full divide-y divide-gray-200\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-50\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Usuario\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Rol\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Creado\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"\\xDAltimo acceso\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Acciones\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"bg-white divide-y divide-gray-200\",children:filteredUsers.map(user=>{const roleInfo=getRoleInfo(user.role);return/*#__PURE__*/_jsxs(\"tr\",{className:\"hover:bg-gray-50\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(Mail,{className:\"w-5 h-5 text-gray-400 mr-3\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm font-medium text-gray-900\",children:user.email}),user.email===(currentUser===null||currentUser===void 0?void 0:currentUser.email)&&/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-blue-600\",children:\"(T\\xFA)\"})]})]})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:/*#__PURE__*/_jsx(\"select\",{value:user.role,onChange:e=>handleRoleChange(user.id,e.target.value),disabled:user.email==='oterov101@gmail.com',className:\"text-sm border border-gray-300 rounded px-2 py-1 disabled:bg-gray-100 disabled:cursor-not-allowed\",children:roles.map(role=>/*#__PURE__*/_jsx(\"option\",{value:role.value,children:role.label},role.value))})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\",children:formatDate(user.created_at)}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\",children:formatDate(user.last_sign_in)}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm font-medium\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex space-x-2\",children:user.email!=='oterov101@gmail.com'&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDeleteUser(user.id),className:\"text-red-600 hover:text-red-900\",title:\"Eliminar usuario\",children:/*#__PURE__*/_jsx(Trash2,{className:\"w-4 h-4\"})})})})]},user.id);})})]})})}),showAddUser&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\",children:/*#__PURE__*/_jsxs(motion.div,{initial:{scale:0.9,opacity:0},animate:{scale:1,opacity:1},className:\"bg-white rounded-lg shadow-xl max-w-md w-full p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900\",children:\"Agregar Nuevo Usuario\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowAddUser(false),className:\"text-gray-400 hover:text-gray-600\",children:/*#__PURE__*/_jsx(X,{className:\"w-5 h-5\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",value:formData.email,onChange:e=>setFormData({...formData,email:e.target.value}),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500\",placeholder:\"usuario@ejemplo.com\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Rol\"}),/*#__PURE__*/_jsx(\"select\",{value:formData.role,onChange:e=>setFormData({...formData,role:e.target.value}),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500\",children:roles.map(role=>/*#__PURE__*/_jsx(\"option\",{value:role.value,children:role.label},role.value))})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-3 mt-6\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowAddUser(false),className:\"flex-1 px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition-colors\",children:\"Cancelar\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleAddUser,className:\"flex-1 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors\",children:\"Agregar Usuario\"})]})]})})]});};export default UserManagement;","map":{"version":3,"names":["React","useState","useEffect","motion","Crown","Shield","User","Mail","Search","Plus","Edit","Trash2","Save","X","AlertTriangle","Users","UserCheck","UserX","useAuth","supabase","toast","jsx","_jsx","jsxs","_jsxs","UserManagement","currentUser","users","setUsers","loading","setLoading","searchTerm","setSearchTerm","showAddUser","setShowAddUser","editingUser","setEditingUser","isOwnerVerified","setIsOwnerVerified","checkingPermissions","setCheckingPermissions","formData","setFormData","email","role","roles","value","label","icon","color","checkOwnerPermissions","console","log","isOwner","error","loadUsers","combinedUsers","data","profiles","from","select","order","ascending","warn","id","display_name","created_at","updated_at","last_sign_in","Date","toISOString","email_confirmed","map","profile","dbError","length","message","_currentUser$user_met","user_metadata","handleSearch","term","filteredUsers","filter","user","toLowerCase","includes","handleAddUser","emailRegex","test","existingUser","find","u","currentProfile","currentProfileError","eq","maybeSingle","userId","newProfile","insertError","insert","split","single","newUser","now","prev","success","getRoleInfo","handleRoleChange","newRole","result","updateError","update","handleDeleteUser","window","confirm","deleteError","delete","r","formatDate","dateString","toLocaleDateString","year","month","day","hour","minute","className","children","onClick","type","placeholder","onChange","e","target","roleInfo","disabled","title","div","initial","scale","opacity","animate"],"sources":["C:/Users/otero/OneDrive/Escritorio/Paginas Web/ri cars automotores/src/pages/admin/UserManagement.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { motion } from 'framer-motion';\nimport { \n  Crown,\n  Shield,\n  User,\n  Mail,\n  Search,\n  Plus,\n  Edit,\n  Trash2,\n  Save,\n  X,\n  AlertTriangle,\n  Users,\n  UserCheck,\n  UserX\n} from 'lucide-react';\nimport { useAuth } from '../../contexts/AuthContext';\nimport { supabase } from '../../supabase/config';\nimport toast from 'react-hot-toast';\n\nconst UserManagement = () => {\n  const { currentUser } = useAuth();\n  const [users, setUsers] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [showAddUser, setShowAddUser] = useState(false);\n  const [editingUser, setEditingUser] = useState(null);\n  const [isOwnerVerified, setIsOwnerVerified] = useState(false);\n  const [checkingPermissions, setCheckingPermissions] = useState(true);\n  const [formData, setFormData] = useState({\n    email: '',\n    role: 'cliente'\n  });\n\n  const roles = [\n    { value: 'cliente', label: 'Cliente', icon: User, color: 'bg-gray-100 text-gray-800' },\n    { value: 'admin', label: 'Administrador', icon: Shield, color: 'bg-blue-100 text-blue-800' },\n    { value: 'owner', label: 'Due√±o', icon: Crown, color: 'bg-purple-100 text-purple-800' }\n  ];\n\n  useEffect(() => {\n    const checkOwnerPermissions = async () => {\n      if (!currentUser) {\n        setCheckingPermissions(false);\n        return;\n      }\n\n      try {\n        setCheckingPermissions(true);\n        console.log('üîç Verificando permisos de owner para:', currentUser.email);\n        \n        // Forzar owner para tu email espec√≠fico\n        if (currentUser.email === 'oterov101@gmail.com') {\n          console.log('üëë OWNER FORZADO para oterov101@gmail.com');\n          setIsOwnerVerified(true);\n          return;\n        }\n        \n        // Verificar si es owner (solo tu email)\n        const isOwner = currentUser.email === 'oterov101@gmail.com';\n        setIsOwnerVerified(isOwner);\n        console.log('‚úÖ Permisos verificados:', {\n          email: currentUser.email,\n          isOwner: isOwner\n        });\n      } catch (error) {\n        console.error('‚ùå Error en verificaci√≥n de permisos:', error);\n        setIsOwnerVerified(false);\n      } finally {\n        setCheckingPermissions(false);\n      }\n    };\n\n    checkOwnerPermissions();\n  }, [currentUser]);\n\n  useEffect(() => {\n    if (isOwnerVerified) {\n      loadUsers();\n    }\n  }, [isOwnerVerified]);\n\n  const loadUsers = async () => {\n    try {\n      setLoading(true);\n      console.log('üîç Cargando usuarios desde la base de datos...');\n      \n      // Obtener usuarios reales de la base de datos usando funci√≥n RPC\n      let combinedUsers = [];\n      \n      try {\n        console.log('üîç Obteniendo usuarios reales de la DB...');\n        \n        // Consultar directamente la tabla profiles\n        const { data: profiles, error } = await supabase\n          .from('profiles')\n          .select('*')\n          .order('created_at', { ascending: false });\n\n        if (error) {\n          console.warn('‚ö†Ô∏è Error obteniendo perfiles de DB:', error);\n          // Usar datos de ejemplo como fallback\n          console.log('‚ÑπÔ∏è Usando datos de ejemplo como fallback');\n          combinedUsers = [\n            {\n              id: '4d3a21a6-cc21-4d72-8888-80ed99e9d9fe',\n              email: 'oterov101@gmail.com',\n              display_name: 'Administrador Principal',\n              role: 'owner',\n              created_at: '2025-08-07T22:00:57.345228+00:00',\n              updated_at: '2025-08-08T03:05:04.462677+00:00',\n              last_sign_in: new Date().toISOString(),\n              email_confirmed: true\n            },\n            {\n              id: 'f4937aae-e054-4fd3-9a5c-bdfea1234567',\n              email: 'oterov006@gmail.com',\n              display_name: 'Valentin Otero',\n              role: 'cliente',\n              created_at: '2025-08-08T00:59:41.291027+00:00',\n              updated_at: '2025-08-08T00:59:41.291027+00:00',\n              last_sign_in: new Date().toISOString(),\n              email_confirmed: true\n            }\n          ];\n        } else {\n          console.log('‚úÖ Usuarios obtenidos de DB:', profiles);\n          // Convertir los datos de la tabla al formato esperado\n          combinedUsers = profiles.map(profile => ({\n            id: profile.id,\n            email: profile.email,\n            display_name: profile.display_name || 'Usuario',\n            role: profile.role || 'cliente',\n            created_at: profile.created_at,\n            updated_at: profile.updated_at,\n            last_sign_in: new Date().toISOString(),\n            email_confirmed: true\n          }));\n        }\n      } catch (dbError) {\n        console.warn('‚ö†Ô∏è Error obteniendo usuarios de DB:', dbError);\n        // Usar datos de ejemplo como fallback\n        combinedUsers = [\n          {\n            id: '4d3a21a6-cc21-4d72-8888-80ed99e9d9fe',\n            email: 'oterov101@gmail.com',\n            display_name: 'Administrador Principal',\n            role: 'owner',\n            created_at: '2025-08-07T22:00:57.345228+00:00',\n            updated_at: '2025-08-08T03:05:04.462677+00:00',\n            last_sign_in: new Date().toISOString(),\n            email_confirmed: true\n          },\n          {\n            id: 'f4937aae-e054-4fd3-9a5c-bdfea1234567',\n            email: 'oterov006@gmail.com',\n            display_name: 'Valentin Otero',\n            role: 'cliente',\n            created_at: '2025-08-08T00:59:41.291027+00:00',\n            updated_at: '2025-08-08T00:59:41.291027+00:00',\n            last_sign_in: new Date().toISOString(),\n            email_confirmed: true\n          }\n        ];\n      }\n\n      console.log('‚úÖ Usuarios cargados:', combinedUsers.length);\n      console.log('üìã Usuarios:', combinedUsers);\n      setUsers(combinedUsers);\n      \n    } catch (error) {\n      console.error('‚ùå Error cargando usuarios:', error);\n      toast.error('Error al cargar los usuarios: ' + error.message);\n      \n      // Fallback: mostrar solo el usuario actual\n      if (currentUser) {\n        setUsers([{\n          id: currentUser.id,\n          email: currentUser.email,\n          display_name: currentUser.user_metadata?.display_name || 'Usuario Principal',\n          role: currentUser.email === 'oterov101@gmail.com' ? 'owner' : 'cliente',\n          created_at: new Date().toISOString(),\n          updated_at: new Date().toISOString(),\n          last_sign_in: new Date().toISOString(),\n          email_confirmed: true\n        }]);\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleSearch = (term) => {\n    setSearchTerm(term);\n  };\n\n  const filteredUsers = users.filter(user =>\n    user.email.toLowerCase().includes(searchTerm.toLowerCase())\n  );\n\n  const handleAddUser = async () => {\n    // Verificar permisos de owner antes de proceder\n    if (!isOwnerVerified) {\n      toast.error('Solo los due√±os pueden agregar usuarios');\n      return;\n    }\n\n    if (!formData.email) {\n      toast.error('El email es obligatorio');\n      return;\n    }\n\n    // Validar formato de email\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n    if (!emailRegex.test(formData.email)) {\n      toast.error('Por favor ingresa un email v√°lido');\n      return;\n    }\n\n    // Verificar si el usuario ya existe\n    const existingUser = users.find(u => u.email.toLowerCase() === formData.email.toLowerCase());\n    if (existingUser) {\n      toast.error('Ya existe un usuario con este email');\n      return;\n    }\n\n    try {\n      console.log('üÜï Agregando usuario:', formData);\n      \n      // Verificar que el usuario actual sigue siendo owner\n      const { data: currentProfile, error: currentProfileError } = await supabase\n        .from('profiles')\n        .select('role')\n        .eq('id', currentUser.id)\n        .maybeSingle();\n\n      if (currentProfileError || currentProfile.role !== 'owner') {\n        toast.error('No tienes permisos para realizar esta acci√≥n');\n        return;\n      }\n      \n      // Crear usuario en auth.users (requiere permisos admin)\n      let userId = null;\n      console.log('‚ÑπÔ∏è Omitiendo creaci√≥n en auth.users (requiere permisos de servidor)');\n      console.log('‚ÑπÔ∏è Solo se crear√° el perfil en la tabla profiles');\n\n      // Crear usuario en la base de datos directamente\n      try {\n        console.log('üîÑ Creando usuario en DB:', formData.email);\n        \n        // Insertar directamente en la tabla profiles\n        const { data: newProfile, error: insertError } = await supabase\n          .from('profiles')\n          .insert([{\n            email: formData.email,\n            display_name: formData.email.split('@')[0],\n            role: formData.role,\n            created_at: new Date().toISOString(),\n            updated_at: new Date().toISOString()\n          }])\n          .select()\n          .single();\n\n        if (insertError) {\n          console.warn('‚ö†Ô∏è Error creando en DB (continuando localmente):', insertError);\n          // Continuar con creaci√≥n local\n          const newUser = {\n            id: `user_${Date.now()}`,\n            email: formData.email,\n            display_name: formData.email.split('@')[0],\n            role: formData.role,\n            created_at: new Date().toISOString(),\n            updated_at: new Date().toISOString(),\n            last_sign_in: null,\n            email_confirmed: true\n          };\n          setUsers(prev => [newUser, ...prev]);\n        } else {\n          console.log('‚úÖ Usuario creado exitosamente en DB:', newProfile);\n          \n          // Agregar a la lista local con datos de DB\n          const newUser = {\n            id: newProfile.id,\n            email: newProfile.email,\n            display_name: newProfile.display_name,\n            role: newProfile.role,\n            created_at: newProfile.created_at,\n            updated_at: newProfile.updated_at,\n            last_sign_in: null,\n            email_confirmed: true\n          };\n          setUsers(prev => [newUser, ...prev]);\n        }\n      } catch (dbError) {\n        console.warn('‚ö†Ô∏è No se pudo crear en DB (continuando localmente):', dbError);\n        \n        // Crear usuario localmente como fallback\n        const newUser = {\n          id: `user_${Date.now()}`,\n          email: formData.email,\n          display_name: formData.email.split('@')[0],\n          role: formData.role,\n          created_at: new Date().toISOString(),\n          updated_at: new Date().toISOString(),\n          last_sign_in: null,\n          email_confirmed: true\n        };\n        setUsers(prev => [newUser, ...prev]);\n      }\n      \n      console.log('‚úÖ Usuario agregado exitosamente');\n      toast.success(`Usuario ${formData.email} agregado con rol ${getRoleInfo(formData.role).label}`);\n      \n      setFormData({ email: '', role: 'cliente' });\n      setShowAddUser(false);\n      \n    } catch (error) {\n      console.error('‚ùå Error agregando usuario:', error);\n      toast.error('Error al agregar el usuario: ' + error.message);\n    }\n  };\n\n  const handleRoleChange = async (userId, newRole) => {\n    // Verificar permisos de owner antes de proceder\n    if (!isOwnerVerified) {\n      toast.error('Solo los due√±os pueden cambiar roles de usuarios');\n      return;\n    }\n\n    try {\n      console.log(`üîÑ Cambiando rol del usuario ${userId} a ${newRole}`);\n      \n      // Verificar permisos de owner\n      if (currentUser.email !== 'oterov101@gmail.com') {\n        toast.error('Solo los due√±os pueden cambiar roles de usuarios');\n        return;\n      }\n      \n      // Prevenir cambiar el rol del owner principal\n      const user = users.find(u => u.id === userId);\n      if (user?.email === 'oterov101@gmail.com' && newRole !== 'owner') {\n        toast.error('No puedes cambiar tu propio rol de due√±o');\n        return;\n      }\n      \n      // Actualizar rol en la base de datos directamente\n      try {\n        console.log('üîÑ Actualizando rol en DB para usuario:', userId);\n        \n        // Actualizar directamente en la tabla profiles\n        const { data: result, error: updateError } = await supabase\n          .from('profiles')\n          .update({ \n            role: newRole,\n            updated_at: new Date().toISOString()\n          })\n          .eq('id', userId)\n          .select()\n          .single();\n\n        if (updateError) {\n          console.warn('‚ö†Ô∏è Error actualizando en DB (continuando localmente):', updateError);\n          // Continuar con actualizaci√≥n local\n        } else {\n          console.log('‚úÖ Rol actualizado exitosamente en DB:', result);\n        }\n      } catch (dbError) {\n        console.warn('‚ö†Ô∏è No se pudo actualizar en DB (continuando localmente):', dbError);\n        // Continuar con actualizaci√≥n local\n      }\n      \n      // Actualizar el estado local\n      setUsers(prev => prev.map(user => \n        user.id === userId ? { \n          ...user, \n          role: newRole,\n          updated_at: new Date().toISOString()\n        } : user\n      ));\n      \n      console.log('‚úÖ Rol actualizado exitosamente');\n      toast.success(`Rol actualizado a ${getRoleInfo(newRole).label}`);\n      \n    } catch (error) {\n      console.error('‚ùå Error cambiando rol:', error);\n      toast.error('Error al cambiar el rol: ' + error.message);\n    }\n  };\n\n  const handleDeleteUser = async (userId) => {\n    // Verificar permisos de owner antes de proceder\n    if (!isOwnerVerified) {\n      toast.error('Solo los due√±os pueden eliminar usuarios');\n      return;\n    }\n\n    const user = users.find(u => u.id === userId);\n    \n          // Verificar permisos de owner\n      if (currentUser.email !== 'oterov101@gmail.com') {\n        toast.error('Solo los due√±os pueden eliminar usuarios');\n        return;\n      }\n    \n    // Prevenir eliminar al owner principal\n    if (user?.email === 'oterov101@gmail.com') {\n      toast.error('No puedes eliminar al due√±o principal');\n      return;\n    }\n\n    if (window.confirm(`¬øEst√°s seguro de eliminar al usuario ${user?.email}?\\n\\nEsta acci√≥n eliminar√°:\\n- El perfil del usuario\\n- Su acceso al sistema\\n\\nEsta acci√≥n no se puede deshacer.`)) {\n      try {\n        console.log(`üóëÔ∏è Eliminando usuario ${userId} (${user?.email})`);\n        \n                    // Eliminar usuario de la base de datos directamente\n        try {\n          console.log('üîÑ Eliminando usuario de DB:', userId);\n          \n          // Eliminar directamente de la tabla profiles\n          const { data: result, error: deleteError } = await supabase\n            .from('profiles')\n            .delete()\n            .eq('id', userId)\n            .select()\n            .single();\n\n          if (deleteError) {\n            console.warn('‚ö†Ô∏è Error eliminando de DB (continuando localmente):', deleteError);\n            // Continuar con eliminaci√≥n local\n          } else {\n            console.log('‚úÖ Usuario eliminado exitosamente de DB:', result);\n          }\n        } catch (dbError) {\n          console.warn('‚ö†Ô∏è No se pudo eliminar de DB (continuando localmente):', dbError);\n          // Continuar con eliminaci√≥n local\n        }\n\n        // Omitir eliminaci√≥n de auth.users (requiere permisos de servidor)\n        console.log('‚ÑπÔ∏è Omitiendo eliminaci√≥n de auth.users (requiere permisos de servidor)');\n        console.log('‚ÑπÔ∏è Solo se eliminar√° el perfil de la tabla profiles');\n        \n        // Actualizar el estado local\n        setUsers(prev => prev.filter(u => u.id !== userId));\n        \n        console.log('‚úÖ Usuario eliminado exitosamente');\n        toast.success('Usuario eliminado exitosamente');\n        \n      } catch (error) {\n        console.error('‚ùå Error eliminando usuario:', error);\n        toast.error('Error al eliminar el usuario: ' + error.message);\n      }\n    }\n  };\n\n  const getRoleInfo = (role) => {\n    return roles.find(r => r.value === role) || roles[0];\n  };\n\n  const formatDate = (dateString) => {\n    if (!dateString) return 'Nunca';\n    return new Date(dateString).toLocaleDateString('es-ES', {\n      year: 'numeric',\n      month: 'short',\n      day: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  };\n\n  if (loading || checkingPermissions) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4\"></div>\n          <p className=\"text-gray-600\">Verificando permisos...</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (!isOwnerVerified) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <div className=\"text-center\">\n          <div className=\"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n            <Crown className=\"w-8 h-8 text-red-600\" />\n          </div>\n          <h2 className=\"text-xl font-semibold text-gray-900 mb-2\">Acceso Denegado</h2>\n          <p className=\"text-gray-600 mb-4\">\n            Solo los due√±os pueden acceder a la gesti√≥n de usuarios.\n          </p>\n          <p className=\"text-sm text-gray-500\">\n            Tu rol actual no tiene permisos para esta funci√≥n.\n          </p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex justify-between items-center\">\n        <div>\n          <h1 className=\"text-2xl font-bold text-gray-900 flex items-center\">\n            <Crown className=\"w-6 h-6 text-purple-600 mr-2\" />\n            Gesti√≥n de Usuarios\n          </h1>\n          <p className=\"text-gray-600 mt-1\">\n            Administra usuarios y sus roles en el sistema\n          </p>\n        </div>\n        <button\n          onClick={() => setShowAddUser(true)}\n          className=\"btn-primary flex items-center\"\n        >\n          <Plus className=\"w-4 h-4 mr-2\" />\n          Agregar Usuario\n        </button>\n      </div>\n\n      {/* Estad√≠sticas */}\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n        <div className=\"bg-white rounded-lg shadow p-4\">\n          <div className=\"flex items-center\">\n            <Users className=\"w-8 h-8 text-blue-600\" />\n            <div className=\"ml-4\">\n              <p className=\"text-sm font-medium text-gray-500\">Total Usuarios</p>\n              <p className=\"text-2xl font-semibold text-gray-900\">{users.length}</p>\n            </div>\n          </div>\n        </div>\n        \n        <div className=\"bg-white rounded-lg shadow p-4\">\n          <div className=\"flex items-center\">\n            <Crown className=\"w-8 h-8 text-purple-600\" />\n            <div className=\"ml-4\">\n              <p className=\"text-sm font-medium text-gray-500\">Due√±os</p>\n              <p className=\"text-2xl font-semibold text-gray-900\">\n                {users.filter(u => u.role === 'owner').length}\n              </p>\n            </div>\n          </div>\n        </div>\n        \n        <div className=\"bg-white rounded-lg shadow p-4\">\n          <div className=\"flex items-center\">\n            <Shield className=\"w-8 h-8 text-blue-600\" />\n            <div className=\"ml-4\">\n              <p className=\"text-sm font-medium text-gray-500\">Administradores</p>\n              <p className=\"text-2xl font-semibold text-gray-900\">\n                {users.filter(u => u.role === 'admin').length}\n              </p>\n            </div>\n          </div>\n        </div>\n        \n        <div className=\"bg-white rounded-lg shadow p-4\">\n          <div className=\"flex items-center\">\n            <User className=\"w-8 h-8 text-gray-600\" />\n            <div className=\"ml-4\">\n              <p className=\"text-sm font-medium text-gray-500\">Clientes</p>\n              <p className=\"text-2xl font-semibold text-gray-900\">\n                {users.filter(u => u.role === 'cliente').length}\n              </p>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* B√∫squeda */}\n      <div className=\"bg-white rounded-lg shadow p-4\">\n        <div className=\"relative\">\n          <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5\" />\n          <input\n            type=\"text\"\n            placeholder=\"Buscar usuarios por email...\"\n            value={searchTerm}\n            onChange={(e) => handleSearch(e.target.value)}\n            className=\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500\"\n          />\n        </div>\n      </div>\n\n      {/* Lista de usuarios */}\n      <div className=\"bg-white rounded-lg shadow overflow-hidden\">\n        <div className=\"overflow-x-auto\">\n          <table className=\"min-w-full divide-y divide-gray-200\">\n            <thead className=\"bg-gray-50\">\n              <tr>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  Usuario\n                </th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  Rol\n                </th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  Creado\n                </th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  √öltimo acceso\n                </th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  Acciones\n                </th>\n              </tr>\n            </thead>\n            <tbody className=\"bg-white divide-y divide-gray-200\">\n              {filteredUsers.map((user) => {\n                const roleInfo = getRoleInfo(user.role);\n                return (\n                  <tr key={user.id} className=\"hover:bg-gray-50\">\n                    <td className=\"px-6 py-4 whitespace-nowrap\">\n                      <div className=\"flex items-center\">\n                        <Mail className=\"w-5 h-5 text-gray-400 mr-3\" />\n                        <div>\n                          <div className=\"text-sm font-medium text-gray-900\">\n                            {user.email}\n                          </div>\n                          {user.email === currentUser?.email && (\n                            <div className=\"text-xs text-blue-600\">\n                              (T√∫)\n                            </div>\n                          )}\n                        </div>\n                      </div>\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap\">\n                      <select\n                        value={user.role}\n                        onChange={(e) => handleRoleChange(user.id, e.target.value)}\n                        disabled={user.email === 'oterov101@gmail.com'}\n                        className=\"text-sm border border-gray-300 rounded px-2 py-1 disabled:bg-gray-100 disabled:cursor-not-allowed\"\n                      >\n                        {roles.map(role => (\n                          <option key={role.value} value={role.value}>\n                            {role.label}\n                          </option>\n                        ))}\n                      </select>\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\n                      {formatDate(user.created_at)}\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\n                      {formatDate(user.last_sign_in)}\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium\">\n                      <div className=\"flex space-x-2\">\n                        {user.email !== 'oterov101@gmail.com' && (\n                          <button\n                            onClick={() => handleDeleteUser(user.id)}\n                            className=\"text-red-600 hover:text-red-900\"\n                            title=\"Eliminar usuario\"\n                          >\n                            <Trash2 className=\"w-4 h-4\" />\n                          </button>\n                        )}\n                      </div>\n                    </td>\n                  </tr>\n                );\n              })}\n            </tbody>\n          </table>\n        </div>\n      </div>\n\n      {/* Modal para agregar usuario */}\n      {showAddUser && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n          <motion.div\n            initial={{ scale: 0.9, opacity: 0 }}\n            animate={{ scale: 1, opacity: 1 }}\n            className=\"bg-white rounded-lg shadow-xl max-w-md w-full p-6\"\n          >\n            <div className=\"flex justify-between items-center mb-4\">\n              <h3 className=\"text-lg font-semibold text-gray-900\">\n                Agregar Nuevo Usuario\n              </h3>\n              <button\n                onClick={() => setShowAddUser(false)}\n                className=\"text-gray-400 hover:text-gray-600\"\n              >\n                <X className=\"w-5 h-5\" />\n              </button>\n            </div>\n            \n            <div className=\"space-y-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  Email\n                </label>\n                <input\n                  type=\"email\"\n                  value={formData.email}\n                  onChange={(e) => setFormData({ ...formData, email: e.target.value })}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500\"\n                  placeholder=\"usuario@ejemplo.com\"\n                />\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  Rol\n                </label>\n                <select\n                  value={formData.role}\n                  onChange={(e) => setFormData({ ...formData, role: e.target.value })}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500\"\n                >\n                  {roles.map(role => (\n                    <option key={role.value} value={role.value}>\n                      {role.label}\n                    </option>\n                  ))}\n                </select>\n              </div>\n            </div>\n            \n            <div className=\"flex space-x-3 mt-6\">\n              <button\n                onClick={() => setShowAddUser(false)}\n                className=\"flex-1 px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition-colors\"\n              >\n                Cancelar\n              </button>\n              <button\n                onClick={handleAddUser}\n                className=\"flex-1 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors\"\n              >\n                Agregar Usuario\n              </button>\n            </div>\n          </motion.div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default UserManagement;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}