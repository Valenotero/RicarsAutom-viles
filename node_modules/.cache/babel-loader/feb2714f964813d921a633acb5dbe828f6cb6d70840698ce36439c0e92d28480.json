{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Navigate}from'react-router-dom';import{useAuth}from'../../contexts/AuthContext';import{jsx as _jsx}from\"react/jsx-runtime\";const OwnerRoute=_ref=>{let{children}=_ref;const{currentUser,isOwner,userRole,loading}=useAuth();const[isOwnerVerified,setIsOwnerVerified]=useState(false);const[checkingOwner,setCheckingOwner]=useState(true);useEffect(()=>{const verifyOwner=async()=>{if(!currentUser){setCheckingOwner(false);return;}try{setCheckingOwner(true);// Verificar si es owner basado en email directamente\nconst isOwnerUser=currentUser.email==='oterov101@gmail.com'||userRole==='owner';setIsOwnerVerified(isOwnerUser);console.log('üëë OwnerRoute verificaci√≥n completada:',{currentUser:currentUser===null||currentUser===void 0?void 0:currentUser.email,userRole,isOwner:isOwnerUser});}catch(error){console.error('‚ùå Error verificando owner:',error);setIsOwnerVerified(false);}finally{setCheckingOwner(false);}};if(!loading){verifyOwner();}},[currentUser,loading,userRole]);if(loading||checkingOwner){return/*#__PURE__*/_jsx(\"div\",{children:\"Cargando...\"});}if(!currentUser){console.log('üö´ OwnerRoute: No hay usuario, redirigiendo a login');return/*#__PURE__*/_jsx(Navigate,{to:\"/login\",replace:true});}if(!isOwnerVerified){console.log('üö´ OwnerRoute: Usuario no es owner, redirigiendo a home');return/*#__PURE__*/_jsx(Navigate,{to:\"/\",replace:true});}console.log('‚úÖ OwnerRoute: Acceso permitido');return children;};export default OwnerRoute;","map":{"version":3,"names":["React","useState","useEffect","Navigate","useAuth","jsx","_jsx","OwnerRoute","_ref","children","currentUser","isOwner","userRole","loading","isOwnerVerified","setIsOwnerVerified","checkingOwner","setCheckingOwner","verifyOwner","isOwnerUser","email","console","log","error","to","replace"],"sources":["C:/Users/otero/OneDrive/Escritorio/Paginas Web/ri cars automotores/src/components/auth/OwnerRoute.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Navigate } from 'react-router-dom';\nimport { useAuth } from '../../contexts/AuthContext';\n\nconst OwnerRoute = ({ children }) => {\n  const { currentUser, isOwner, userRole, loading } = useAuth();\n  const [isOwnerVerified, setIsOwnerVerified] = useState(false);\n  const [checkingOwner, setCheckingOwner] = useState(true);\n\n  useEffect(() => {\n    const verifyOwner = async () => {\n      if (!currentUser) {\n        setCheckingOwner(false);\n        return;\n      }\n\n      try {\n        setCheckingOwner(true);\n        // Verificar si es owner basado en email directamente\n        const isOwnerUser = currentUser.email === 'oterov101@gmail.com' || userRole === 'owner';\n        setIsOwnerVerified(isOwnerUser);\n        console.log('üëë OwnerRoute verificaci√≥n completada:', {\n          currentUser: currentUser?.email,\n          userRole,\n          isOwner: isOwnerUser\n        });\n      } catch (error) {\n        console.error('‚ùå Error verificando owner:', error);\n        setIsOwnerVerified(false);\n      } finally {\n        setCheckingOwner(false);\n      }\n    };\n\n    if (!loading) {\n      verifyOwner();\n    }\n  }, [currentUser, loading, userRole]);\n\n  if (loading || checkingOwner) {\n    return <div>Cargando...</div>;\n  }\n\n  if (!currentUser) {\n    console.log('üö´ OwnerRoute: No hay usuario, redirigiendo a login');\n    return <Navigate to=\"/login\" replace />;\n  }\n\n  if (!isOwnerVerified) {\n    console.log('üö´ OwnerRoute: Usuario no es owner, redirigiendo a home');\n    return <Navigate to=\"/\" replace />;\n  }\n\n  console.log('‚úÖ OwnerRoute: Acceso permitido');\n  return children;\n};\n\nexport default OwnerRoute;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,QAAQ,KAAQ,kBAAkB,CAC3C,OAASC,OAAO,KAAQ,4BAA4B,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAErD,KAAM,CAAAC,UAAU,CAAGC,IAAA,EAAkB,IAAjB,CAAEC,QAAS,CAAC,CAAAD,IAAA,CAC9B,KAAM,CAAEE,WAAW,CAAEC,OAAO,CAAEC,QAAQ,CAAEC,OAAQ,CAAC,CAAGT,OAAO,CAAC,CAAC,CAC7D,KAAM,CAACU,eAAe,CAAEC,kBAAkB,CAAC,CAAGd,QAAQ,CAAC,KAAK,CAAC,CAC7D,KAAM,CAACe,aAAa,CAAEC,gBAAgB,CAAC,CAAGhB,QAAQ,CAAC,IAAI,CAAC,CAExDC,SAAS,CAAC,IAAM,CACd,KAAM,CAAAgB,WAAW,CAAG,KAAAA,CAAA,GAAY,CAC9B,GAAI,CAACR,WAAW,CAAE,CAChBO,gBAAgB,CAAC,KAAK,CAAC,CACvB,OACF,CAEA,GAAI,CACFA,gBAAgB,CAAC,IAAI,CAAC,CACtB;AACA,KAAM,CAAAE,WAAW,CAAGT,WAAW,CAACU,KAAK,GAAK,qBAAqB,EAAIR,QAAQ,GAAK,OAAO,CACvFG,kBAAkB,CAACI,WAAW,CAAC,CAC/BE,OAAO,CAACC,GAAG,CAAC,wCAAwC,CAAE,CACpDZ,WAAW,CAAEA,WAAW,SAAXA,WAAW,iBAAXA,WAAW,CAAEU,KAAK,CAC/BR,QAAQ,CACRD,OAAO,CAAEQ,WACX,CAAC,CAAC,CACJ,CAAE,MAAOI,KAAK,CAAE,CACdF,OAAO,CAACE,KAAK,CAAC,4BAA4B,CAAEA,KAAK,CAAC,CAClDR,kBAAkB,CAAC,KAAK,CAAC,CAC3B,CAAC,OAAS,CACRE,gBAAgB,CAAC,KAAK,CAAC,CACzB,CACF,CAAC,CAED,GAAI,CAACJ,OAAO,CAAE,CACZK,WAAW,CAAC,CAAC,CACf,CACF,CAAC,CAAE,CAACR,WAAW,CAAEG,OAAO,CAAED,QAAQ,CAAC,CAAC,CAEpC,GAAIC,OAAO,EAAIG,aAAa,CAAE,CAC5B,mBAAOV,IAAA,QAAAG,QAAA,CAAK,aAAW,CAAK,CAAC,CAC/B,CAEA,GAAI,CAACC,WAAW,CAAE,CAChBW,OAAO,CAACC,GAAG,CAAC,qDAAqD,CAAC,CAClE,mBAAOhB,IAAA,CAACH,QAAQ,EAACqB,EAAE,CAAC,QAAQ,CAACC,OAAO,MAAE,CAAC,CACzC,CAEA,GAAI,CAACX,eAAe,CAAE,CACpBO,OAAO,CAACC,GAAG,CAAC,yDAAyD,CAAC,CACtE,mBAAOhB,IAAA,CAACH,QAAQ,EAACqB,EAAE,CAAC,GAAG,CAACC,OAAO,MAAE,CAAC,CACpC,CAEAJ,OAAO,CAACC,GAAG,CAAC,gCAAgC,CAAC,CAC7C,MAAO,CAAAb,QAAQ,CACjB,CAAC,CAED,cAAe,CAAAF,UAAU","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}